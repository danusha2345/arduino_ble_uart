# ESP32-S3-Zero Pin Connections

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–ü–ª–∞—Ç–∞**: ESP32-S3-Zero (Waveshare –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
- **Flash**: 4MB
- **PSRAM**: 2MB (Octal)
- **USB**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π USB-Serial/JTAG —á–µ—Ä–µ–∑ GPIO43/44

## ‚ö†Ô∏è –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∏–Ω—ã (–ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨)
- **GPIO33-37**: –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Octal PSRAM
- **GPIO21**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π WS2812 RGB LED –Ω–∞ –ø–ª–∞—Ç–µ
- **GPIO43-44**: USB Serial/JTAG (UART0 –¥–ª—è USB CDC –æ—Ç–ª–∞–¥–∫–∏)

## ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∏–Ω—ã
- **GPIO1-2**: I2C –¥–ª—è OLED –¥–∏—Å–ø–ª–µ—è (SCL=1, SDA=2)
- **GPIO5-6**: UART1 –¥–ª—è GPS –º–æ–¥—É–ª—è
- **GPIO9-13**: SPI –¥–ª—è TFT –¥–∏—Å–ø–ª–µ—è (–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω)
- **GPIO43-44**: USB CDC –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π)

---

## üì° GPS –º–æ–¥—É–ª—å (UART1 - GPIO5/6)

| –§—É–Ω–∫—Ü–∏—è | ESP32-S3 Pin | GPS –ú–æ–¥—É–ª—å Pin | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------------|----------------|----------|
| RX      | **GPIO5**    | TX             | –ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –æ—Ç GPS (UART1 RX) |
| TX      | **GPIO6**    | RX             | –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–º–∞–Ω–¥ GPS (UART1 TX) |
| GND     | GND          | GND            | –ó–µ–º–ª—è |
| VCC     | 3.3V         | VCC            | –ü–∏—Ç–∞–Ω–∏–µ 3.3V |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UART1 –Ω–∞ GPIO5/6. UART0 (GPIO43/44) –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω –¥–ª—è USB CDC –æ—Ç–ª–∞–¥–∫–∏.

---

## üñ•Ô∏è OLED –¥–∏—Å–ø–ª–µ–π (I2C - GPIO1/2)

| –§—É–Ω–∫—Ü–∏—è | ESP32-S3 Pin | OLED Pin | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------------|----------|----------|
| SCL     | **GPIO1**    | SCL      | I2C —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| SDA     | **GPIO2**    | SDA      | I2C –¥–∞–Ω–Ω—ã–µ |
| GND     | GND          | GND      | –ó–µ–º–ª—è |
| VCC     | 3.3V         | VCC      | –ü–∏—Ç–∞–Ω–∏–µ 3.3V |

**I2C –∞–¥—Ä–µ—Å**: 0x3C (–∏–ª–∏ 0x78 –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)

---

## üì∫ TFT –¥–∏—Å–ø–ª–µ–π ST7789V (SPI - GPIO9-13) ‚ö†Ô∏è **Currently Disabled**

| –§—É–Ω–∫—Ü–∏—è | ESP32-S3 Pin | TFT Pin | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------------|---------|----------|
| DC      | **GPIO9**    | DC      | Data/Command –≤—ã–±–æ—Ä |
| RST     | **GPIO10**   | RST     | Reset |
| MOSI    | **GPIO11**   | SDA     | SPI –¥–∞–Ω–Ω—ã–µ (Master Out) |
| SCLK    | **GPIO12**   | SCL     | SPI —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| BL      | **GPIO13**   | BL      | Backlight (–ø–æ–¥—Å–≤–µ—Ç–∫–∞) |
| CS      | GND          | CS      | Chip Select (–ø–æ–¥–∫–ª—é—á–µ–Ω –∫ GND) |
| GND     | GND          | GND     | –ó–µ–º–ª—è |
| VCC     | 3.3V         | VCC     | –ü–∏—Ç–∞–Ω–∏–µ 3.3V |

**‚ö†Ô∏è –í–ê–ñ–ù–û**: TFT –¥–∏—Å–ø–ª–µ–π **–æ—Ç–∫–ª—é—á–µ–Ω –≤ –ø—Ä–æ—à–∏–≤–∫–µ** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. TFT_eSPI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ç—Ä–µ–±—É–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –¥–∏—Å–ø–ª–µ—è - –ø–æ–ø—ã—Ç–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–µ–∑ –¥–∏—Å–ø–ª–µ—è –≤—ã–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—à —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

**–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å TFT (–ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–º –¥–∏—Å–ø–ª–µ–µ)**:
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ TFT –¥–∏—Å–ø–ª–µ–π –∫ –ø–∏–Ω–∞–º GPIO9-13
2. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ TFT –≤ `src/main.cpp` (–Ω–∞–π–¥–∏—Ç–µ "TODO: –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ")
3. –£–¥–∞–ª–∏—Ç–µ –∑–∞—â–∏—Ç—ã `#ifndef ESP32_S3` –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö `clearDisplayLine()` –∏ `updateDisplayLine()`
4. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ï—Å–ª–∏ –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω–∞, GPIO13 –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ 3.3V –Ω–∞–ø—Ä—è–º—É—é.

---

## üí° RGB LED (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π)

| –§—É–Ω–∫—Ü–∏—è | ESP32-S3 Pin | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------------|----------|
| LED     | **GPIO21**   | WS2812 RGB LED (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –ø–ª–∞—Ç–µ) |

**‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ**: GPIO21 —É–∂–µ –∑–∞–Ω—è—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–º WS2812 –∏ –Ω–µ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ü–µ–ª–µ–π.

---

## üîå –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–≤–æ–±–æ–¥–Ω—ã–µ –ø–∏–Ω—ã

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
- GPIO0, GPIO1, GPIO2, GPIO3, GPIO4
- GPIO14, GPIO15, GPIO16, GPIO17, GPIO18, GPIO19, GPIO20
- GPIO38, GPIO39, GPIO40, GPIO41, GPIO42, GPIO45, GPIO46, GPIO47, GPIO48

**–ò–∑–±–µ–≥–∞–π—Ç–µ**:
- GPIO21 (WS2812 LED)
- GPIO33-37 (PSRAM)
- GPIO43-44 (USB CDC)

**–£–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è**:
- GPIO5-6 (UART1 –¥–ª—è GPS)
- GPIO7-8 (I2C –¥–ª—è OLED)
- GPIO9-13 (SPI –¥–ª—è TFT)
- GPIO43-44 (USB CDC –æ—Ç–ª–∞–¥–∫–∞)

---

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PlatformIO

```ini
[env:esp32-s3]
platform = espressif32@6.12.0
board = esp32-s3-devkitc-1
framework = arduino
board_upload.flash_size = 4MB
board_build.partitions = default.csv
monitor_speed = 115200
upload_port = COM39
build_flags = 
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DBOARD_HAS_PSRAM
    -DTZ_FORCE_OFFSET_MINUTES=180
    -DESP32_S3=1
    -DCORE_DEBUG_LEVEL=3
lib_deps = 
    h2zero/NimBLE-Arduino@^2.3.6
    adafruit/Adafruit SSD1306@^2.5.7
    adafruit/Adafruit GFX Library@^1.11.9
    mikalhart/TinyGPSPlus@^1.0.3
    bodmer/TFT_eSPI@^2.5.0
```

---

## üõ†Ô∏è –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø—Ä–æ—à–∏–≤–∫–∞

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ USB-C** –∫–∞–±–µ–ª—å –∫ ESP32-S3-Zero
2. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ COM –ø–æ—Ä—Ç** (–æ–±—ã—á–Ω–æ COM39)
3. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è**:
   ```bash
   platformio run -e esp32-s3
   ```
4. **–ü—Ä–æ—à–∏–≤–∫–∞**:
   ```bash
   platformio run -e esp32-s3 --target upload
   ```
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
   ```bash
   platformio device monitor -e esp32-s3 -b 115200
   ```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ—à–∏–≤–∫–∏:
1. ‚úÖ –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
2. ‚úÖ USB CDC Serial —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ COM –ø–æ—Ä—Ç—É
3. ‚úÖ OLED –¥–∏—Å–ø–ª–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
4. ‚úÖ TFT –¥–∏—Å–ø–ª–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç GPS –¥–∞–Ω–Ω—ã–µ
5. ‚úÖ BLE –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
6. ‚úÖ WiFi –º–æ–∂–µ—Ç —Ä–∞–∑–¥–∞–≤–∞—Ç—å NTRIP –¥–∞–Ω–Ω—ã–µ

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ PSRAM –∏–ª–∏ board configuration
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–∫–∞–∑–∞–Ω–Ω—É—é –≤—ã—à–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å `board_build.partitions = default.csv`

### –ù–µ—Ç –≤—ã–≤–æ–¥–∞ –≤ Serial Monitor —á–µ—Ä–µ–∑ USB
- **–ü—Ä–∏—á–∏–Ω–∞**: USB –∫–∞–±–µ–ª—å –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π COM –ø–æ—Ä—Ç
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ USB-C –∫–∞–±–µ–ª—è –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π COM –ø–æ—Ä—Ç. –í –∫–æ–¥–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ `delay(2000)` –ø–æ—Å–ª–µ `Serial.begin()` –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ USB CDC

### –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è (GPS/OLED/TFT)
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∏–Ω—ã
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–∞–±–ª–∏—Ü–µ –≤—ã—à–µ

---

## üì∂ –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã ESP32-S3

### WiFi Access Point
- **SSID**: `UM980_GPS_BRIDGE_S3` (–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç ESP32-C3: `UM980_GPS_BRIDGE`)
- **IP –∞–¥—Ä–µ—Å**: 192.168.4.1
- **–ü–æ—Ä—Ç**: 23 (Telnet-like –ø—Ä–æ—Ç–æ–∫–æ–ª)
- **–ü–∞—Ä–æ–ª—å**: 123456789

### Bluetooth Low Energy (BLE)
- **–ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**: `UM980_S3_GPS` (–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç ESP32-C3: `UM980_C3_GPS`)
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: Nordic UART Service (NUS) - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π
- **MTU**: 512 –±–∞–π—Ç
- **Service UUID**: `6E400001-B5A3-F393-E0A9-E50E24DCCA9E` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π NUS)
- **RX Characteristic UUID**: `6E400002-B5A3-F393-E0A9-E50E24DCCA9E`
- **TX Characteristic UUID**: `6E400003-B5A3-F393-E0A9-E50E24DCCA9E`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Nordic UART Service UUID –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ S3 –∏ C3 —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –ø–æ –∏–º–µ–Ω–∞–º (`UM980_S3_GPS` vs `UM980_C3_GPS`).

---

**–°–æ–∑–¥–∞–Ω–æ**: 2025-01-12
**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2025-01-12
**–í–µ—Ä—Å–∏—è –ø—Ä–æ—à–∏–≤–∫–∏**: ESP32-S3 —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ BLE UUID –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
